@startuml Hello World
!pragma revision 1

!define Puml dist
'!define Puml https://raw.githubusercontent.com/larryr/UsePlantUML/master/dist
!includeurl Puml/Common.puml
!includeurl Puml/Databases/all.puml 
!includeurl Puml/Compute/Function.puml
!includeurl Puml/Networking/TrafficManager.puml
!includeurl Puml/Networking/VPNGateway.puml
!includeurl Puml/Networking/DNS.puml
!includeurl Puml/Networking/VirtualWAN.puml
!includeurl Puml/Networking/VirtualNetwork.puml
!includeurl Puml/Cloud/EventHub.puml
!includeurl Puml/Cloud/Control.puml
 
actor "Person" as personAlias
Function(fct, "Label", "Technology", "A Description")
SqlDatabase(sqldb, "Label", "Technology", "Optional Description")
ProtectedNetwork(pnetgw, "Privafy ABS(Encrypt)", "Encrypted", "Policy Enforced Network")
VPNGateway(vpn, "Privafy VPN", "IPSec/IKE2", "Gateway to Privafy")
DNS(dns,"PrivafyDNS","Privafy","Secure DNS")
Control(pctl, "Privafy Ctl", "mTLS", "Control channel to Edge")
EventHub("hub", "Privafy Msg", "nats", "Reliable Message Bus")
TrafficManager(traffic, "Traffic Manager", "netmgr", "Apply enforcement and traffic shaping")
VirtualWAN(wan, "Internet", "netmgr", "Access to Internet")
VirtualNetwork(pnet, "Private Network", "netmgr", "Enterprise Network Access")

personAlias --> pctl
personAlias --> pnetgw
pnetgw -d-> traffic
traffic -d-> wan
traffic -d-> pnet
traffic -d-> dns
vpn -l-> traffic

pctl -l-> hub
hub -l-> fct
fct --> sqldb

Person2 ---> vpn
@enduml